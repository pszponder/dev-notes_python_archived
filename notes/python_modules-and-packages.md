# Python Modules and Packages

## Packages vs Modules

- **Module**: A module is a single file that contains Python definitions (functions, classes, variables) and statements. Essentially, any Python file (`.py`) can be considered a module.

- **Package**: A package is a way of organizing related modules into a single directory hierarchy. It's essentially a directory that contains multiple module files and a special `__init__.py` file to tell Python that this directory should be treated as a package or subpackage.

Consider this directory structure:

```
myproject/
|-- main.py
|-- mymodule.py
|-- mypackage/
|   |-- __init__.py
|   |-- module1.py
|   |-- module2.py
```

- In this structure, `mymodule.py` is a **module**.
- `mypackage` is a **package** that contains two modules: `module1.py` and `module2.py`.

### `__init__.py`

An `__init__.py` file has 2 functions:

- Convert a folder of scripts into an importable package of modules (before Python 3.3)
- Run package initialization code
- `__init__.py` can be an empty file

**NOTE:** Don't need `__init__.py` anymore

- As of Python 3.3+, all folders are considered packages so it is no longer necessary to put `__init__.py` into your folder structure.
- If you still need to support legacy systems, it may be a good idea to still include an `__init__.py` file in your packages

Running Package Initialization Code:

- The first time a package or one of its modules is imported, Python will execute the `__init__.py` file in the root folder of the package if the file exists.
- All objects and functions defined in `__init__.py` are considered part of the package namespace.

## Best Practices for Creating and Importing Modules

- When creating a module to support your program, follow these guidelines on where to store the file:

  1. Put the module in the same directory as the main program (`main.py` or `app.py`)
  2. Put the module in a subdirectory below the main program
  3. Refer back to option 1

- When importing modules, always use the absolute path to avoid issues
- In Python, you can import adjacent modules or modules in sub-directories, generally can't import modules from higher-level directories

## Importing Modules

### Importing w/ "import"

- Use the `import` keyword to import a python module or package.
- `import` gives you access to a new namespace generated by the imported module / package

```python
import my_module
```

### Partial Imports w/ "from..import"

Use the `from..import` syntax to import specific items from a module

```python
from <module> import <item1>, <item2>, ...
```

You can also import everything using `*`

- Generally bad practice and not recommended
- Any variable / function which starts with an underscore is not imported

```python
# Import all items from <module> directly
from <module> import *
```

### Importing with Aliased Names

You can alias the name of an import with the `as` keyword.

```python
import my_module as mod
from my_module import my_func as func
```

### Examples of Importing Modules / Packages

[Example Project Importing Modules & Packages](../practice/importing-modules-and-packages/readme.md)

### Relative vs Absolute Paths

**NOTE:** Recommended to always use absolute paths when importing Python packages / modules

## `if __name__ == "__main__":`

- When a `module` is read in by Python it is given a name which matches up to the file name.
- This name of the module can be accessed within the module by accessing the `__name__` keyword.
- The module which is executed by the Python interpreter is always given the `__name__` of `"__main__"`

**NOTE:** `__name__` for the executing module is always `"__main__"`

Often, want to ensure that we only run code if the containing module is executed (and not imported).

```python
# script.py

if __name__ == "__main__":
    # Your logic here
    # Only run code here if the containing
    # module is executed via "python script.py"
```

```python
# main.py

# Import the utility module and reference it in the code with the "util" alias
import utility as util
from utility import add, subtract
import shopping.shopping_cart as cart  # Import the shopping_cart module from the shopping package

# Only run this code if the module is executed
#  (and not imported)
# This is common practice for main.py
if __name__ == "__main__":
    # Run the imported functions from the utility module
    divided = util.divide(5, 10)
    print(divided)  # 0.5

    multiplied = util.multiply(5, 10)
    print(multiplied)  # 50

    added = add(1, 2)
    print(added)  # 3

    subtracted = subtract(1, 2)
    print(subtracted)  # -1

    # Run the imported functions from the shopping_cart module in the shopping package
    my_cart = cart.buy("apple")
    print(my_cart)  # ['apple']
```

### Project Entry Point => main.py OR app.py

- It is a standard practice to have a root entry point file in your python project.
- By convention, `main.py` or `app.py` are used as the Python root entry point files
- The entry point script is responsible for executing the main project code.

## Determine Available Namespaces w/ dir()

Use the `dir()` function to obtain a list of available namespaces in the current namespace

## Python's Built-In Modules

All Python Built-In Modules can be found under the [Python Module Index](https://docs.python.org/3/py-modindex.html)
Think of the `Python Module Index` as Python's Standard Library.

## 3rd Party Python Libraries w/ Python Package Index (pypi)

https://pypi.org/

`pypi` is an open-source 3rd party python package repository. It equivalent to `npm` in JavaScript.

### Managing External Packages

[External Packages and Virtual Environments](ptyhon_virtual-environments.md)

## Resources / References

- [Python Docs - Python Built-in Modules](https://docs.python.org/3/py-modindex.html)
- [Python Package Index (PyPi)](https://pypi.org/)
- [How to install pip](https://www.makeuseof.com/tag/install-pip-for-python/)
- [Real Python - Python Virtual Environments: A Primer](https://realpython.com/python-virtual-environments-a-primer/)
- [The Definitive Guide to Python import Statements](https://chrisyeh96.github.io/2017/08/08/definitive-guide-python-imports.html)
- [NerualNine - Importing Your Own Python Modules Properly](https://www.youtube.com/watch?v=GxCXiSkm6no)
- [Sanjeev Thiyagarajan - Python Packages & Modules](https://www.youtube.com/watch?v=2DRPBUiqmV4)
- [launchcode education - Importing Our Own Modules](https://education.launchcode.org/lchs/chapters/local-dev/vscode-custom-modules.html)
